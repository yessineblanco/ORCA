{% extends 'base_BACK.html.twig' %}

{% block title %}Product index{% endblock %}

{% block body %}

    <div class="container">
    <h1>Product List</h1>
        <section class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 offset-md-11">
                        <form action="{{ path('search_product')}}" method="GET">
                            <div class="input-group">
                                <input type="search" class="form-control form-control-lg" placeholder="Entrer le nom d'un produit" id="site-search" name="search">
                                <div class="input-group-append">
                                    <button  class="btn btn-lg btn-default">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                </div>
            </div>
            </div>
        </section>
        <h6 style="color: #fffffc">filtrer par prix :</h6>
        <form method="post" action="{{ path('filtre_product') }}">
            <div slider id="slider-distance">
                <div>
                    <div inverse-left style="width:70%;"></div>
                    <div inverse-right style="width:70%;"></div>
                    <div range style="left:30%;right:40%;"></div>
                    <span thumb style="left:30%;"></span>
                    <span thumb style="left:60%;"></span>
                    <div sign style="left:30%;">
                        <span id="value">30</span>
                    </div>
                    <div sign style="left:60%;">
                        <span id="value">60</span>
                    </div>
                </div>
                <input name="min" type="range" tabindex="0" value="30" max="100000" min="0" step="1" oninput="
  this.value=Math.min(this.value,this.parentNode.childNodes[5].value-1);
  var value=(100/(parseInt(this.max)-parseInt(this.min)))*parseInt(this.value)-(100/(parseInt(this.max)-parseInt(this.min)))*parseInt(this.min);
  var children = this.parentNode.childNodes[1].childNodes;
  children[1].style.width=value+'%';
  children[5].style.left=value+'%';
  children[7].style.left=value+'%';children[11].style.left=value+'%';
  children[11].childNodes[1].innerHTML=this.value;" />

                <input name="max" type="range" tabindex="0" value="60" max="100000" min="0" step="1" oninput="
  this.value=Math.max(this.value,this.parentNode.childNodes[3].value-(-1));
  var value=(100/(parseInt(this.max)-parseInt(this.min)))*parseInt(this.value)-(100/(parseInt(this.max)-parseInt(this.min)))*parseInt(this.min);
  var children = this.parentNode.childNodes[1].childNodes;
  children[3].style.width=(100-value)+'%';
  children[5].style.right=(100-value)+'%';
  children[9].style.left=value+'%';children[13].style.left=value+'%';
  children[13].childNodes[1].innerHTML=this.value;" />
            </div>
            </br>
            <button type="submit" class="btn btn-primary" >filter</button>
        </form>


        <button> <a href="{{ path('pdfp')}}" class="btn btn-primary">PDF</a></button>

        <table class="table">
        <thead>
            <tr>
                <th>ProductName</th>
                <th>ProductDescription</th>
                <th>ProductPrice</th>
                <th>UpdateDate</th>
                <th>ProductQuantity</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for product in products %}
            <tr>
                <td>{{ product.ProductName }}</td>
                <td>{{ product.ProductDescription }}</td>
                <td>{{ product.ProductPrice }}</td>
                <td>{{ product.UpdateDate ? product.UpdateDate|date('Y-m-d') : '' }}</td>
                <td>{{ product.ProductQuantity }}</td>
                <td>
                    <a href="{{ path('app_product_edit', {'id': product.id}) }}">edit</a>
                    <a href="{{ path('app_product_show_back', {'id': product.id}) }}">show </a>
                </td>
            </tr>

        {% else %}
            <tr>
                <td colspan="7">no records found</td>
            </tr>
        {% endfor %}

        </tbody>

    </table>
        <span>{{ knp_pagination_render(products) }}</span>

    <a href="{{ path('app_product_new') }}">Create new</a>
    </div>
{% endblock %}
